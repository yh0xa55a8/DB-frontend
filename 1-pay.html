<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>SequoiaBook</title>
		<meta name="description" content="Multi-Purpose E-commerce Template">
		<!--[if IE]>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<![endif]-->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="">
		<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
		<link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
		<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
		<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />
		<link rel="stylesheet" type="text/css" href="third-party/sidr/css/jquery.sidr.dark.css">
		<link rel="stylesheet" type="text/css" href="third-party/slick/css/slick.css">

		<link rel="stylesheet" type="text/css" href="third-party/wow/css/animate.min.css">
        <link rel="stylesheet" type="text/css" href="css/jquery-ui.min.css">
		<link rel="stylesheet" type="text/css" href="third-party/magnific-popup-master/css/magnific-popup.css">
		<link rel="stylesheet" type="text/css" href="third-party/accordionjs/css/accordion.min.css">
		<link rel="stylesheet" type="text/css" href="style.css">
		<link rel="stylesheet" type="text/css" href="icons/icons.css">
		<link rel="stylesheet" type="text/css" href="css/custom.css">
		<link rel="stylesheet" type="text/css" href="css/responsive.css">
		<link rel="stylesheet" id="color" href="css/default.css">
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/lite-green.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/dark-green.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/black.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/orange.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/brown.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/lite-green.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/dark-purple.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/cyan.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/dark-blue.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/purple.css"> -->
		<!-- <link rel="stylesheet" type="text/css" href="css/colors/sky-blue.css"> -->

		<link rel="stylesheet" href="third-party/fontawesome/releases/v5.2.0/css/all.css" >

		<link href="https://fonts.googleapis.com/css?family=Roboto:400,500,600,700" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700,800" rel="stylesheet">

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="http://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="http://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

		<script>
			function getUrlParam(variable)
			{
				let query = window.location.search.substring(1);
				let vars = query.split("&");
				for (let i=0;i<vars.length;i++) {
					let pair = vars[i].split("=");
					if(pair[0] === variable){return pair[1];}
				}
				return(false);
			}

			let merchanData;

			$(()=>{
				let merchandiseId = getUrlParam("MerchandiseId");
				$.ajax({
					url: "http://www.sparkxyf.cn:8080/api/GetMerchandise",
					type: 'post',
					contentType: 'application/json;charset=UTF-8',
					xhrFields: {withCredentials: true},
					data: JSON.stringify({
						MerchandiseId: merchandiseId
					}),
					success: (mdata)=>{
						merchanData = mdata;
						console.log(mdata)
						$.ajax({
							url: 'http://www.sparkxyf.cn:8080/api/GetBook/',
							type: 'post',
							contentType: 'application/json;charset=UTF-8',
							xhrFields: {withCredentials: true},
							data: JSON.stringify({
								ISBN: mdata.ISBN
							}),
							success: (data)=>{
								let paths = data.ImagePath.split('/');
								let path = paths[paths.length-1];
								renderItem(path, mdata.Title, mdata.Author, mdata.Price)

							}
						})

					}

				})
			});

			function renderItem(img, title, author, price){
				$('#itemContainer').append('<tr class="cart-item"> \
  <td class="product-name" data-title="Product"> \
    <a href="#" class="cart-product-thumb"> \
      <img src="http://sparkxyf.cn/'+img.toString()+'" alt="Product Thumbnail"> \
    </a>  \
    <div class="product-info"> \
      <h3>'+title+'</h3>  \
      <ul> \
        <li>作者：'+author+'</li>  \
      </ul> \
    </div> \
  </td>  \
  <td class="product-price" data-title="Price"> \
    <span class="product-Price-amount amount">¥'+price.toString()+'</span> \
  </td>  \
  <td class="product-quantity" data-title="Quantity"> \
    <div class="quantity"> \
      <i>1</i> \
    </div> \
  </td>  \
  <td class="product-subtotal" data-title="Total"> \
    <span class="product-Price-amount amount">¥'+price.toString()+'</span> \
  </td>  \
</tr>'
				);
				$('#totalPrice').text("¥"+price.toString());
			}

			function createTransact(){
				$.ajax({
					url: 'http://www.sparkxyf.cn:8080/api/Transact/',
					type: 'post',
					contentType: 'application/json;charset=UTF-8',
					xhrFields: {withCredentials: true},
					data: JSON.stringify({
						MerchandiseId: merchanData.MerchandiseId,
						ActualPrice: merchanData.Price,
						Amount: 1
					}),
					success: ()=>{
						console.log("success submit transact.");
					}
				})
			}

		</script>


	</head>
	<body class="home header-v1">

		<div id="page" class="site">
			<header id="masthead" class="site-header sticky-enabled">
				<div class="container">
					<div class="site-branding pull-left">
						<div id="site-identity">
							<h1 class="site-title"><a href="1-home.html"  rel="home"><img alt="logo" class="site-logo" src="images/logo.png">红杉书屋</a></h1>
						</div><!-- #site-identity -->
					</div><!-- .site-branding -->
					<a href="1-search.html"><input type="button" value="进入搜索" class="pull-right quick-link-button"></a>
					<div id="header-right" class="pull-right">
						<div class="hearder-min-cart">
							<ul>
								<li class="cart-button mini-cart-wrap">
									<a href="1-cart.html"><i class=" icon-basket"></i>	</a>
								</li>
			       				<li class="cart-button">
				       				<a href="1-wishlist.html"  title="wishlist"><i class=" icon-heart"></i>	</a>
			       				</li>
							</ul>
						</div><!-- #quick-link-buttons -->
					</div>
					<nav class="main-navigation pull-right">
						<ul>
							<a class="current-menu-item menu-item-has-children"><a href="1-home.html">主页&nbsp&nbsp</a>
							</a>
							<li class="menu-item-has-children"><a href="#">类别</a>
								<ul class="sub-menu">
									<li><a href="1-search.html">世界名著</a></li>
									<li><a href="1-search.html">当代文学</a></li>
									<li><a href="1-search.html">哲学宗教</a></li>
									<li><a href="1-search.html">政治法律</a></li>
									<li><a href="1-search.html">历史地理</a></li>
									<li><a href="1-search.html">自然科学</a></li>
								</ul>
							</li>
							<a class="menu-item-has-children"><a href="1-order.html" >我的订单</a>
							</a>
							<a class="menu-item-has-children"><a href="1-info.html" >&nbsp&nbsp&nbsp我的账户</a>
							</a>
						</ul>
					</nav> <!-- .site-navigation -->
				</div> <!-- .container -->
			</header> <!-- .site-header -->
			<div id="custom-header">
			  <div class="custom-header-content">
			    <div class="container">
			      <h1 class="page-title">结账</h1>
			      <div id="breadcrumb">
			        <div  aria-label="Breadcrumbs" class="breadcrumbs breadcrumb-trail">
			          <ul class="trail-items">
			            <li class="trail-item trail-begin"><a href="" rel="home"><span>主页</span></a></li>
			            <li class="trail-item trail-end"><span>结账</span></li>
			          </ul>
			        </div> <!-- .breadcrumbs -->
			      </div> <!-- #breadcrumb -->
			    </div> <!-- .container -->
			  </div>  <!-- .custom-header-content -->
			</div> <!-- .custom-header -->
            <div id="content" class="site-content default-full-width">
              <div class="container">
                <div class="inner-wrapper">
                  <div id="primary" class="content-area">
                    <main id="main" class="site-main">
						<div class="section-cart">
						    <form class="product-cart-form">
						        <table class="cart shop-table shop-table-responsive">
						            <thead>
						                <tr>
						                    <th class="product-name">明细商品</th>
						                    <th class="product-price">商品单价</th>
						                    <th class="product-quantity">购买数量</th>
						                    <th class="product-subtotal">共计价格</th>
						                    <th class="product-remove"></th>
						                </tr>
						            </thead>
						            <tbody id="itemContainer">

<!--										<tr>-->
<!--                                            <td colspan="5" class="actions">-->
<!--                                                <div class="coupon">-->
<!--                                                    <label>Coupon:</label>-->
<!--                                                    <input type="text" name="coupon-code" placeholder="优惠券码">-->
<!--													<a href="1-coupon.html">-->
<!--														<input type=button style="margin-right:10px;" value="查看优惠券">-->
<!--													</a>-->
<!--												</div>-->
<!--                                            </td>-->
<!--                                        </tr>-->
						            </tbody>
						        </table>
						    </form> <!-- .product-cart-form -->
						    <div class="cart-collaterals">
						       <div class="cart-totals calculated-shipping">
						            <h2>Cart Totals</h2>
						            <table class="shop-table shop-table-responsive">
						                <tbody>
						                    <tr class="order-total">
						                        <th>总计</th>
						                        <th data-title="Total">
						                            <strong>
						                                <span class="product-Price-amount amount" id="totalPrice">

						                                </span>
						                            </strong>
						                        </th>
						                    </tr>
						                </tbody>
						            </table>
						            <div class="wc-proceed-to-checkout">
						                <a href="#" class="checkout-button custom-button" target="_blank" onclick="createTransact()"> 确认并结账 </a>
						            </div>
						        </div> <!-- .cart_totals -->
						    </div> <!-- .cart-collaterals -->
						</div>
                    </main> <!-- #main -->
                  </div> <!-- #primary -->
                </div> <!-- #inner-wrapper -->
              </div><!-- .container -->
            </div> <!-- #content-->
			<div class="footer-container">
				<footer id="colophon" class="site-footer">
					<div class="colophon-bottom">
						<div class="container">
							<div class="inner-wrapper">
								<a href="1-intro.html">  团队介绍 </a>
								<br>
								<a href="http://www.miitbeian.gov.cn"> 互联网ICP备案：沪ICP备19023316号-1 </a>
								<p> (+86) 008 400 123 &nbsp&nbsp database@tongji.edu.cn &nbsp&nbsp 4800 Cao'an Street, China </p>
								<p> Copyright © 2019 SequoiaBook . All rights reserved. </p>
							</div><!-- .inner-wrapper -->
						</div> <!-- .container -->
					</div> <!-- .colophon-bottom -->
				</footer> <!-- footer ends here -->
			</div><!-- footer-container -->
		</div> <!--#page-->
		<div id="btn-scrollup">
			<a  title="Go Top"  class="scrollup button-circle" href="#"><i class="fas fa-angle-up"></i></a>
		</div><!-- #btn-scrollup -->
		<div class="quick-view-content white-popup-block mfp-hide" id="quick-view-content-wrappr">
			<div class="product-single">
				<div class="inner-wrapper">
					<div class="col-grid-6">
												<div class="single-thumb-detail clear-fix">
							<div class="single-main-thumb clear-fix">
								<div class="single-thumb"><span class="ribbon-rotated onsale">-16%</span><a href="#"><img alt="product" src="images/shop/product-1.jpg"></a></div>
								<div class="single-thumb"><span class="ribbon-rotated onsale">-16%</span><a href="#"><img alt="product" src="images/shop/product-2.jpg"></a></div>
								<div class="single-thumb"><span class="ribbon-rotated onsale">-16%</span><a href="#"><img alt="product" src="images/shop/product-3.jpg"></a></div>
								<div class="single-thumb"><span class="ribbon-rotated onsale">-16%</span><a href="#"><img alt="product" src="images/shop/product-4.jpg"></a></div>
							</div>
							<div class="pager-thumbnail  section-carousel-enabled">
								<div class="pager-thumb active"><img alt="product"  src="images/shop/product-1.jpg"></div>
								<div class="pager-thumb"><img alt="product"  src="images/shop/product-2.jpg"></div>
								<div class="pager-thumb"><img alt="product"  src="images/shop/product-3.jpg"></div>
								<div class="pager-thumb"><img alt="product"  src="images/shop/product-4.jpg"></div>
							</div><!-- .pager-thumbnail -->
						</div><!-- .single-thumb-detail -->

					</div><!-- col-grid-6 -->
					<div class="col-grid-6">
						<div class="summary entry-summary">
							<div class="product-item-details">
								<h2 class="product-title"><a href="#" title="title">Asymmetric Ruffle Skirt</a></h2>
								<div class="rating-wrapper clear-fix">
									<div class="product-ratings">
										<span class="star active"></span>
										<span class="star active"></span>
										<span class="star active"></span>
										<span class="star"></span>
										<span class="star"></span>
									</div>
									<ul class="info-links">
										<li><a href="#">(3.5) 54 Ratings </a> </li>
										<li><a href="#">  4 Reviews  </a></li>
									</ul>
								</div><!-- .rating-wrapper -->
								<div class="product-price-container">
									<del class="dis-price">$65.99</del>
									<span class="fix-price">$45.99</span>
								</div><!-- .product-price-container -->
							</div><!-- .product-item-details -->
							<div class="item-content">
								<p>Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus.</p>
							</div><!-- .item-content -->
							<div class="availability">
								<i class="fas fa-check-circle"></i>
								<span>200 in stock</span>
							</div><!-- .availability -->
							<div class="quick-filter filter-by-color">
								<div class="filter-color-container">
									<a href="#" class="filter-color-box color-1 active"></a>
									<a href="#" class="filter-color-box color-2"></a>
									<a href="#" class="filter-color-box color-3"></a>
									<a href="#" class="filter-color-box color-4"></a>
									<a href="#" class="filter-color-box color-5"></a>
									<a href="#" class="filter-color-box color-6"></a>
								</div>
							</div>
							<div class="quick-filter filter-by-size">
								<div class="filter-size-container">
									<a href="#" class="filter-size-box active">xs</a>
									<a href="#" class="filter-size-box">s</a>
									<a href="#" class="filter-size-box">m</a>
									<a href="#" class="filter-size-box">l</a>
									<a href="#" class="filter-size-box">xl</a>
								</div>
								<!-- End .filter-size-container -->
							</div>
							<form class="single-cart" method="post">
								<input type="number" class="input-text" step="1" min="1" value="1">
								<button type="button" name="add-ro-cart" class="custom-button button-small"> Add To Cart </button>
								<button type="button" name="add-ro-cart" class="custom-button custom-secondary-button button-small"> Wishlist </button>
							</form><!-- .single-cart -->
							<div class="entry-meta product-meta">
								<h4>CATEGORY :</h4>
								<span class="cat-links">
									<a href="#" rel="tag">Clothes,</a>
									<a href="#" rel="tag">Winter</a>
								</span>
							</div><!-- .entry-meta -->
							<div class="share-on">
						        <h4>SHARE US:</h4>
						        <div class="social-links text-alignleft">
						            <ul>
						              <li><a target="_blank" href="http://facebook.com/">Facebook</a></li>
						              <li><a target="_blank" href="http://twitter.com/">Twitter</a></li>
						              <li><a target="_blank" href="http://linkedin.com/">Linkedln</a></li>
						              <li><a target="_blank" href="http://youtube.com/">Linkedln</a></li>
						            </ul>
						        </div>
						   </div>
						</div>
					</div><!-- .col-grid-6 -->
				</div><!-- .inner-wrapper -->
			</div> <!-- .product-single -->
		</div><!-- #quick-view-content-wrappr -->
        <div class="login-popup white-popup-block mfp-hide" id="login-popup">
        	<div class="inner-wrapper">
        		<div class="col-grid-6">
        			<div class="login-account">
        				<div class="user-acc-header">
        					<img src="images/blog-single/author1.png" alt="">
        					<h3>Login</h3>
        				</div>
        				<div class="content-body">
        					<form>
        						<input type="email" placeholder="Username OR Email address">
        						<input type="password" placeholder="Password">
        						<input type="button" class="custom-button button-small" value="Login">
        					</form>
        				</div>
        			</div> <!-- .login-account -->
        			<div class="share-on-us text-aligncenter clear-fix social-links circle brand-color">
		        	<h3>Login With :</h3>
			            <ul>
			              <li><a target="_blank" href="http://facebook.com/">Facebook</a></li>
			              <li><a target="_blank" href="http://twitter.com/">Twitter</a></li>
			              <li><a target="_blank" href="http://linkedin.com/">Linkedln</a></li>
			              <li><a target="_blank" href="http://youtube.com/">Linkedln</a></li>
			            </ul>
			        </div>
        		</div><!-- .col-grid-6 -->
        		<div class="col-grid-6">
        			<div class="register-account">
        				<div class="user-acc-header">
        					<h3>Register</h3>
        				</div>
        				<div class="content-body">
        					<form>
        						<input type="text" placeholder="Name">
        						<input type="text" placeholder="Mobile number">
        						<input type="email" placeholder="Email address">
        						<input type="password" placeholder="Password">
        						<input type="button" class="btn btn-custom2" value="Register">
        					</form>
        				</div>
        			</div><!-- .register-account -->
        			<div class="share-on-us text-aligncenter clear-fix social-links circle brand-color">
		        	<h3>Register With :</h3>
			            <ul>
			              <li><a target="_blank" href="http://facebook.com/">Facebook</a></li>
			              <li><a target="_blank" href="http://twitter.com/">Twitter</a></li>
			              <li><a target="_blank" href="http://linkedin.com/">Linkedln</a></li>
			              <li><a target="_blank" href="http://youtube.com/">Linkedln</a></li>
			            </ul>
			        </div>
        		</div><!-- .col-grid-6 -->
        	</div><!-- .inner-wrapper -->
        </div><!-- .user-account-popup -->
		<script  src="third-party/jquery/jquery-3.2.1.min.js"></script>
		<script  src="third-party/jquery/jquery-migrate-3.0.0.min.js"></script>
		<!--Include all compiled plugins (below), or include individual files as needed-->
		<script  src="third-party/sidr/js/jquery.sidr.js"></script>
		<script  src="third-party/cycle2/jquery.cycle2.js"></script>
		<script  src="third-party/slick/js/slick.min.js"></script>
		<script  src="third-party/wow/js/wow.min.js"></script>
        <script src="js/jquery-ui.min.js"></script>
		<script  src="third-party/magnific-popup-master/js/jquery.magnific-popup.js"></script>
		<script  src="third-party/accordionjs/js/accordion.min.js"></script>
		<script  src="js/contact.js"></script>
		<script  src="js/custom.js"></script>
		<script  src="js/color-switcher.js"></script>
	</body>
</html>


